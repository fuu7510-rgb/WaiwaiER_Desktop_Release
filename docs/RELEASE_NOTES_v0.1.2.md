# WaiwaiER Desktop リリースノート

## 概要
- リリース: v0.1.2
- チャネル: ALPHA
- 対象OS: Windows
- 配布形態: ストア不使用（手動アップデート）
- 配布物（MSI）: TBD

## ダウンロード
- GitHub Releases（このリポジトリのReleasesページ）からダウンロード
	- 配布物（MSI）: TBD

## 重要（必読）
- 破壊的変更の可能性: 本ビルドはALPHAのため、今後の更新でデータ形式（DB/プロジェクト/エクスポート）が破壊的に変更される可能性があります。
- アップデート前バックアップ推奨: 更新前に必ずエクスポート（JSON/パッケージ）などでバックアップしてください。
- コード署名: 本ビルドはコード署名を行っていません（アルファでは未対応）。

## インストール
1. 配布ZIP（MSI）を展開
2. 展開したMSIを実行

## 手動アップデート
- 手順は [docs/RELEASE_ALPHA_PLAN.md](docs/RELEASE_ALPHA_PLAN.md) を参照

## 変更点
### 追加
- インポート: JSONファイル選択に加えて、テキスト欄に貼り付けたJSONを直接インポート可能
- インポート: 貼り付け/ファイル読み込みを行うインポートダイアログを追加
- エクスポート: JSONを「ファイル保存」ではなく、コピー用テキストとして表示（コピー操作を追加）
- プロジェクト: プロジェクト管理画面から `.waiwai` パッケージのインポート/エクスポートが可能
- Simulator: 親レコードの詳細から子テーブルを参照できる「Related XXXs」（親→子のインライン一覧）を追加
- Simulator: Related一覧の右下「＋追加」から、親参照（Ref）を自動セットして子レコードを追加・編集可能
- ERエディタ: カラム設定に AppSheet メモ設定（Note Parameters）の編集機能を追加（Excelエクスポート時にヘッダーセルのNoteへ出力）
- ドキュメント: AppSheet メモ設定（Note Parameters）のキー一覧（全項目）を追加

### 改善
- インポート: 「ファイル読み込み」と「貼り付けテキスト」を同じパース/バリデーション処理で扱うように整理
- プロジェクト: 暗号化パッケージのインポート時、パスフレーズ入力で再試行できるように改善
- プロジェクト: プロジェクト管理画面でプロジェクト一覧をDnDで並び替え可能（順序は永続化）
- ERエディタ: 拡大倍率（ズーム%）を表示
- ERエディタ: 左下トグルボタンのON状態を「薄背景＋枠線」で強調し、判別しやすく改善
- i18n: インポート/エクスポート向け文言を追加（ja/en）
- 文言: 「ダミーデータ」表記を「サンプルデータ」に整理
- ERエディタ: カラム設定の項目表示を「日本語=英語(日本語) / 英語=英語のみ」に統一（AppSheet画面と対比しやすく改善）
- ERエディタ: カラム設定の重複項目を統合し、矛盾する組み合わせを自動整理（例: Required_If と Required、AppFormula と Default Value の競合など）
- エクスポート（Excel）: Noteに出力する AppSheet メモ設定（Note Parameters）を、ユーザー設定優先でマージして反映

### 変更（挙動）
- ヘッダーのインポートボタン: 直接ファイル選択を開くのではなく、インポートダイアログを開く方式に変更（ダイアログ内からファイル選択可能）
- エクスポートメニューの「パッケージ」: 書き出しはプロジェクト管理画面から行う方式に変更

### 修正
- ERエディタ: 子テーブル側のカラム型を Ref 以外に変更した際、関連リレーション線が残り続ける問題を修正（自動で削除）
- ERエディタ: Refカラムの参照先（親テーブル/親カラム）を変更した際、リレーション線が追従しない問題を修正（自動で付け替え）

## 追記（サンプルデータ同期/永続化）
※本追記は、v0.1.2 の説明補足として追記しています。

### 追加
- サンプルデータ（Simulatorの行データ）をプロジェクト単位で保存/復元（アプリ再起動でも保持）
- 旧保存形式（過去版の保存先）を開けるようにフォールバック読み込みを追加

### 改善
- Simulator/Export の表示データ源泉を `sampleDataByTableId` に統一（画面ごとに別のサンプルが生成される問題を回避）
- 旧データの `sample_data`（テーブル名/カラム名キー）を読み込み時に tableId/columnId 形式へ移行し、表示・参照の整合を改善
- ER図側のサンプル編集を、列の候補値（dummyValues）ではなく「行データ（sampleData）」に直結するようにし、ER図⇔Simulatorで同一データを編集できるよう改善

### 修正
- ER図側で 4件入力すると Simulator 側に 5件目が循環生成される挙動を抑止（入力した件数だけ表示）

## 既知の制限
- ALPHAのため、互換性（DB/プロジェクト形式）が将来変更される可能性があります。

## 不具合報告
- 手順/期待/実際の結果、OS、バージョン（設定→バージョン情報の値）を添えて連絡
- 連絡先: GitHub Issues（配布用Publicリポジトリ）
- 注意: Issuesは公開されます。個人情報・社外秘情報・顧客データ等は記載しないでください。
