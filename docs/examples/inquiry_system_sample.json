{
  "tables": [
    {
      "id": "table-lead-contacts",
      "name": "lead_contacts",
      "description": "リード連絡先 - 入会前の連絡先（保護者相当）",
      "columns": [
        {
          "id": "col-lead-contacts-id",
          "name": "id",
          "description": "主キー",
          "type": "Number",
          "isKey": true,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 0
        },
        {
          "id": "col-lead-contacts-lead-code",
          "name": "lead_code",
          "description": "リードコード（一意）",
          "type": "Text",
          "isKey": false,
          "isLabel": true,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 1
        },
        {
          "id": "col-lead-contacts-last-name",
          "name": "last_name",
          "description": "姓",
          "type": "Name",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 2
        },
        {
          "id": "col-lead-contacts-first-name",
          "name": "first_name",
          "description": "名",
          "type": "Name",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 3
        },
        {
          "id": "col-lead-contacts-last-name-kana",
          "name": "last_name_kana",
          "description": "セイ",
          "type": "Text",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 4
        },
        {
          "id": "col-lead-contacts-first-name-kana",
          "name": "first_name_kana",
          "description": "メイ",
          "type": "Text",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 5
        },
        {
          "id": "col-lead-contacts-email",
          "name": "email",
          "description": "メール",
          "type": "Email",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 6
        },
        {
          "id": "col-lead-contacts-phone",
          "name": "phone",
          "description": "電話",
          "type": "Phone",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 7
        },
        {
          "id": "col-lead-contacts-preferred-contact",
          "name": "preferred_contact",
          "description": "連絡手段（PHONE/EMAIL/LINE等）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false, "enumValues": ["PHONE", "EMAIL", "LINE"] },
          "order": 8
        },
        {
          "id": "col-lead-contacts-address-postal-code",
          "name": "address_postal_code",
          "description": "郵便番号",
          "type": "Text",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 9
        },
        {
          "id": "col-lead-contacts-address-line1",
          "name": "address_line1",
          "description": "住所1",
          "type": "Text",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 10
        },
        {
          "id": "col-lead-contacts-address-line2",
          "name": "address_line2",
          "description": "住所2",
          "type": "Text",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 11
        },
        {
          "id": "col-lead-contacts-notes",
          "name": "notes",
          "description": "備考",
          "type": "LongText",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 12
        },
        {
          "id": "col-lead-contacts-created-at",
          "name": "created_at",
          "description": "作成日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 13
        },
        {
          "id": "col-lead-contacts-updated-at",
          "name": "updated_at",
          "description": "更新日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 14
        }
      ],
      "position": { "x": 0, "y": 0 },
      "createdAt": "2026-01-09T00:00:00.000Z",
      "updatedAt": "2026-01-09T00:00:00.000Z"
    },
    {
      "id": "table-inquiry-cases",
      "name": "inquiry_cases",
      "description": "問い合わせ案件 - 問い合わせの本体（種別/チャネル/校舎/担当）",
      "columns": [
        {
          "id": "col-inquiry-cases-id",
          "name": "id",
          "description": "主キー",
          "type": "Number",
          "isKey": true,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 0
        },
        {
          "id": "col-inquiry-cases-case-code",
          "name": "case_code",
          "description": "案件コード（一意）",
          "type": "Text",
          "isKey": false,
          "isLabel": true,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 1
        },
        {
          "id": "col-inquiry-cases-school-id",
          "name": "school_id",
          "description": "校舎ID（FK, 未確定ならNULL）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 2
        },
        {
          "id": "col-inquiry-cases-lead-contact-id",
          "name": "lead_contact_id",
          "description": "リード連絡先ID（FK）",
          "type": "Ref",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { 
            "required": false,
            "refTableId": "table-lead-contacts",
            "refColumnId": "col-lead-contacts-id"
          },
          "order": 3
        },
        {
          "id": "col-inquiry-cases-family-id",
          "name": "family_id",
          "description": "入会後の世帯ID（FK, 任意）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 4
        },
        {
          "id": "col-inquiry-cases-guardian-id",
          "name": "guardian_id",
          "description": "入会後の保護者ID（FK, 任意）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 5
        },
        {
          "id": "col-inquiry-cases-student-id",
          "name": "student_id",
          "description": "入会後の生徒ID（FK, 任意）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 6
        },
        {
          "id": "col-inquiry-cases-category",
          "name": "category",
          "description": "種別（TRIAL/INFO/COMPLAINT/BILLING等）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "enumValues": ["TRIAL", "INFO", "COMPLAINT", "BILLING"] },
          "order": 7
        },
        {
          "id": "col-inquiry-cases-channel",
          "name": "channel",
          "description": "チャネル（WEB/PHONE/EMAIL/IN_PERSON等）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "enumValues": ["WEB", "PHONE", "EMAIL", "IN_PERSON"] },
          "order": 8
        },
        {
          "id": "col-inquiry-cases-subject",
          "name": "subject",
          "description": "件名",
          "type": "Text",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 9
        },
        {
          "id": "col-inquiry-cases-status",
          "name": "status",
          "description": "状態（OPEN/IN_PROGRESS/RESOLVED/CLOSED）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "enumValues": ["OPEN", "IN_PROGRESS", "RESOLVED", "CLOSED"] },
          "order": 10
        },
        {
          "id": "col-inquiry-cases-priority",
          "name": "priority",
          "description": "優先度（LOW/MEDIUM/HIGH）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false, "enumValues": ["LOW", "MEDIUM", "HIGH"] },
          "order": 11
        },
        {
          "id": "col-inquiry-cases-assigned-to",
          "name": "assigned_to",
          "description": "担当者（users.id）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 12
        },
        {
          "id": "col-inquiry-cases-opened-at",
          "name": "opened_at",
          "description": "起票日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 13
        },
        {
          "id": "col-inquiry-cases-closed-at",
          "name": "closed_at",
          "description": "クローズ日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 14
        },
        {
          "id": "col-inquiry-cases-created-at",
          "name": "created_at",
          "description": "作成日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 15
        },
        {
          "id": "col-inquiry-cases-updated-at",
          "name": "updated_at",
          "description": "更新日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 16
        }
      ],
      "position": { "x": 400, "y": 0 },
      "createdAt": "2026-01-09T00:00:00.000Z",
      "updatedAt": "2026-01-09T00:00:00.000Z"
    },
    {
      "id": "table-inquiry-messages",
      "name": "inquiry_messages",
      "description": "問い合わせメッセージ - 問い合わせ内容・返信内容の履歴",
      "columns": [
        {
          "id": "col-inquiry-messages-id",
          "name": "id",
          "description": "主キー",
          "type": "Number",
          "isKey": true,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 0
        },
        {
          "id": "col-inquiry-messages-inquiry-case-id",
          "name": "inquiry_case_id",
          "description": "案件ID（FK）",
          "type": "Ref",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { 
            "required": true,
            "refTableId": "table-inquiry-cases",
            "refColumnId": "col-inquiry-cases-id"
          },
          "order": 1
        },
        {
          "id": "col-inquiry-messages-direction",
          "name": "direction",
          "description": "方向（IN/OUT）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "enumValues": ["IN", "OUT"] },
          "order": 2
        },
        {
          "id": "col-inquiry-messages-message-type",
          "name": "message_type",
          "description": "種別（EMAIL/WEB_FORM/NOTE等）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false, "enumValues": ["EMAIL", "WEB_FORM", "NOTE"] },
          "order": 3
        },
        {
          "id": "col-inquiry-messages-body",
          "name": "body",
          "description": "本文",
          "type": "LongText",
          "isKey": false,
          "isLabel": true,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 4
        },
        {
          "id": "col-inquiry-messages-sent-at",
          "name": "sent_at",
          "description": "送信日時（OUT）",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 5
        },
        {
          "id": "col-inquiry-messages-received-at",
          "name": "received_at",
          "description": "受信日時（IN）",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 6
        },
        {
          "id": "col-inquiry-messages-created-by",
          "name": "created_by",
          "description": "作成者（users.id）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 7
        },
        {
          "id": "col-inquiry-messages-created-at",
          "name": "created_at",
          "description": "作成日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 8
        }
      ],
      "position": { "x": 800, "y": 0 },
      "createdAt": "2026-01-09T00:00:00.000Z",
      "updatedAt": "2026-01-09T00:00:00.000Z"
    },
    {
      "id": "table-case-activities",
      "name": "case_activities",
      "description": "案件アクティビティ - コール/メール/面談などの対応履歴",
      "columns": [
        {
          "id": "col-case-activities-id",
          "name": "id",
          "description": "主キー",
          "type": "Number",
          "isKey": true,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 0
        },
        {
          "id": "col-case-activities-inquiry-case-id",
          "name": "inquiry_case_id",
          "description": "案件ID（FK）",
          "type": "Ref",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { 
            "required": true,
            "refTableId": "table-inquiry-cases",
            "refColumnId": "col-inquiry-cases-id"
          },
          "order": 1
        },
        {
          "id": "col-case-activities-activity-type",
          "name": "activity_type",
          "description": "種別（CALL/EMAIL/MEETING/SEND_DOC等）",
          "type": "Enum",
          "isKey": false,
          "isLabel": true,
          "isVirtual": false,
          "constraints": { "required": true, "enumValues": ["CALL", "EMAIL", "MEETING", "SEND_DOC"] },
          "order": 2
        },
        {
          "id": "col-case-activities-occurred-at",
          "name": "occurred_at",
          "description": "実施日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 3
        },
        {
          "id": "col-case-activities-performed-by",
          "name": "performed_by",
          "description": "実施者（users.id）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 4
        },
        {
          "id": "col-case-activities-outcome",
          "name": "outcome",
          "description": "結果（NO_ANSWER/CONNECTED/RESCHEDULE等）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false, "enumValues": ["NO_ANSWER", "CONNECTED", "RESCHEDULE"] },
          "order": 5
        },
        {
          "id": "col-case-activities-notes",
          "name": "notes",
          "description": "メモ",
          "type": "LongText",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 6
        }
      ],
      "position": { "x": 1200, "y": 0 },
      "createdAt": "2026-01-09T00:00:00.000Z",
      "updatedAt": "2026-01-09T00:00:00.000Z"
    },
    {
      "id": "table-trial-events",
      "name": "trial_events",
      "description": "体験イベント - 校舎が用意する体験枠（日時/定員/コース）",
      "columns": [
        {
          "id": "col-trial-events-id",
          "name": "id",
          "description": "主キー",
          "type": "Number",
          "isKey": true,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 0
        },
        {
          "id": "col-trial-events-event-code",
          "name": "event_code",
          "description": "イベントコード（一意）",
          "type": "Text",
          "isKey": false,
          "isLabel": true,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 1
        },
        {
          "id": "col-trial-events-school-id",
          "name": "school_id",
          "description": "校舎ID（FK）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 2
        },
        {
          "id": "col-trial-events-course-id",
          "name": "course_id",
          "description": "コースID（FK, 任意）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 3
        },
        {
          "id": "col-trial-events-title",
          "name": "title",
          "description": "タイトル",
          "type": "Text",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 4
        },
        {
          "id": "col-trial-events-start-at",
          "name": "start_at",
          "description": "開始日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 5
        },
        {
          "id": "col-trial-events-end-at",
          "name": "end_at",
          "description": "終了日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 6
        },
        {
          "id": "col-trial-events-capacity",
          "name": "capacity",
          "description": "定員",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 7
        },
        {
          "id": "col-trial-events-status",
          "name": "status",
          "description": "状態（OPEN/CLOSED/CANCELED）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "enumValues": ["OPEN", "CLOSED", "CANCELED"] },
          "order": 8
        },
        {
          "id": "col-trial-events-created-at",
          "name": "created_at",
          "description": "作成日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 9
        }
      ],
      "position": { "x": 0, "y": 500 },
      "createdAt": "2026-01-09T00:00:00.000Z",
      "updatedAt": "2026-01-09T00:00:00.000Z"
    },
    {
      "id": "table-trial-applications",
      "name": "trial_applications",
      "description": "体験申込",
      "columns": [
        {
          "id": "col-trial-applications-id",
          "name": "id",
          "description": "主キー",
          "type": "Number",
          "isKey": true,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 0
        },
        {
          "id": "col-trial-applications-application-code",
          "name": "application_code",
          "description": "申込コード（一意）",
          "type": "Text",
          "isKey": false,
          "isLabel": true,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 1
        },
        {
          "id": "col-trial-applications-trial-event-id",
          "name": "trial_event_id",
          "description": "体験イベントID（FK）",
          "type": "Ref",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { 
            "required": true,
            "refTableId": "table-trial-events",
            "refColumnId": "col-trial-events-id"
          },
          "order": 2
        },
        {
          "id": "col-trial-applications-lead-contact-id",
          "name": "lead_contact_id",
          "description": "リード連絡先ID（FK）",
          "type": "Ref",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { 
            "required": true,
            "refTableId": "table-lead-contacts",
            "refColumnId": "col-lead-contacts-id"
          },
          "order": 3
        },
        {
          "id": "col-trial-applications-student-name",
          "name": "student_name",
          "description": "体験生徒名（未入会）",
          "type": "Name",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 4
        },
        {
          "id": "col-trial-applications-student-grade",
          "name": "student_grade",
          "description": "学年（文字列で暫定）",
          "type": "Text",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 5
        },
        {
          "id": "col-trial-applications-status",
          "name": "status",
          "description": "状態（APPLIED/CONFIRMED/CANCELED/ATTENDED/NO_SHOW）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "enumValues": ["APPLIED", "CONFIRMED", "CANCELED", "ATTENDED", "NO_SHOW"] },
          "order": 6
        },
        {
          "id": "col-trial-applications-applied-at",
          "name": "applied_at",
          "description": "申込日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 7
        },
        {
          "id": "col-trial-applications-confirmed-at",
          "name": "confirmed_at",
          "description": "確認日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 8
        },
        {
          "id": "col-trial-applications-notes",
          "name": "notes",
          "description": "備考",
          "type": "LongText",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 9
        }
      ],
      "position": { "x": 400, "y": 500 },
      "createdAt": "2026-01-09T00:00:00.000Z",
      "updatedAt": "2026-01-09T00:00:00.000Z"
    },
    {
      "id": "table-trial-attendances",
      "name": "trial_attendances",
      "description": "体験実施結果 - 出席/欠席、評価、入会意向",
      "columns": [
        {
          "id": "col-trial-attendances-id",
          "name": "id",
          "description": "主キー",
          "type": "Number",
          "isKey": true,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 0
        },
        {
          "id": "col-trial-attendances-trial-application-id",
          "name": "trial_application_id",
          "description": "体験申込ID（FK）",
          "type": "Ref",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { 
            "required": true,
            "refTableId": "table-trial-applications",
            "refColumnId": "col-trial-applications-id"
          },
          "order": 1
        },
        {
          "id": "col-trial-attendances-attended",
          "name": "attended",
          "description": "出席したか",
          "type": "Yes/No",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 2
        },
        {
          "id": "col-trial-attendances-evaluation",
          "name": "evaluation",
          "description": "評価（GOOD/NORMAL/BAD等）",
          "type": "Enum",
          "isKey": false,
          "isLabel": true,
          "isVirtual": false,
          "constraints": { "required": false, "enumValues": ["GOOD", "NORMAL", "BAD"] },
          "order": 3
        },
        {
          "id": "col-trial-attendances-intention",
          "name": "intention",
          "description": "入会意向（HIGH/MID/LOW/UNKNOWN）",
          "type": "Enum",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false, "enumValues": ["HIGH", "MID", "LOW", "UNKNOWN"] },
          "order": 4
        },
        {
          "id": "col-trial-attendances-follow-up-needed",
          "name": "follow_up_needed",
          "description": "フォロー要否",
          "type": "Yes/No",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 5
        },
        {
          "id": "col-trial-attendances-follow-up-due-date",
          "name": "follow_up_due_date",
          "description": "フォロー期日",
          "type": "Date",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 6
        },
        {
          "id": "col-trial-attendances-notes",
          "name": "notes",
          "description": "所見",
          "type": "LongText",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 7
        },
        {
          "id": "col-trial-attendances-recorded-by",
          "name": "recorded_by",
          "description": "記録者（users.id）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 8
        },
        {
          "id": "col-trial-attendances-recorded-at",
          "name": "recorded_at",
          "description": "記録日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 9
        }
      ],
      "position": { "x": 800, "y": 500 },
      "createdAt": "2026-01-09T00:00:00.000Z",
      "updatedAt": "2026-01-09T00:00:00.000Z"
    },
    {
      "id": "table-lead-conversions",
      "name": "lead_conversions",
      "description": "コンバージョン - 入会に至った紐付け（任意）",
      "columns": [
        {
          "id": "col-lead-conversions-id",
          "name": "id",
          "description": "主キー",
          "type": "Number",
          "isKey": true,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true, "unique": true },
          "order": 0
        },
        {
          "id": "col-lead-conversions-lead-contact-id",
          "name": "lead_contact_id",
          "description": "リード連絡先ID（FK）",
          "type": "Ref",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { 
            "required": true,
            "refTableId": "table-lead-contacts",
            "refColumnId": "col-lead-contacts-id"
          },
          "order": 1
        },
        {
          "id": "col-lead-conversions-family-id",
          "name": "family_id",
          "description": "世帯ID（FK）",
          "type": "Number",
          "isKey": false,
          "isLabel": true,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 2
        },
        {
          "id": "col-lead-conversions-guardian-id",
          "name": "guardian_id",
          "description": "保護者ID（FK）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 3
        },
        {
          "id": "col-lead-conversions-student-id",
          "name": "student_id",
          "description": "生徒ID（FK）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 4
        },
        {
          "id": "col-lead-conversions-course-contract-id",
          "name": "course_contract_id",
          "description": "通年契約ID（FK）",
          "type": "Number",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": false },
          "order": 5
        },
        {
          "id": "col-lead-conversions-converted-at",
          "name": "converted_at",
          "description": "コンバージョン日時",
          "type": "DateTime",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { "required": true },
          "order": 6
        },
        {
          "id": "col-lead-conversions-source-case-id",
          "name": "source_case_id",
          "description": "起点案件（FK）",
          "type": "Ref",
          "isKey": false,
          "isLabel": false,
          "isVirtual": false,
          "constraints": { 
            "required": false,
            "refTableId": "table-inquiry-cases",
            "refColumnId": "col-inquiry-cases-id"
          },
          "order": 7
        }
      ],
      "position": { "x": 1200, "y": 500 },
      "createdAt": "2026-01-09T00:00:00.000Z",
      "updatedAt": "2026-01-09T00:00:00.000Z"
    }
  ],
  "relations": [
    {
      "id": "rel-inquiry-cases-lead-contacts",
      "sourceTableId": "table-lead-contacts",
      "sourceColumnId": "col-lead-contacts-id",
      "targetTableId": "table-inquiry-cases",
      "targetColumnId": "col-inquiry-cases-lead-contact-id",
      "type": "one-to-many"
    },
    {
      "id": "rel-inquiry-messages-inquiry-cases",
      "sourceTableId": "table-inquiry-cases",
      "sourceColumnId": "col-inquiry-cases-id",
      "targetTableId": "table-inquiry-messages",
      "targetColumnId": "col-inquiry-messages-inquiry-case-id",
      "type": "one-to-many"
    },
    {
      "id": "rel-case-activities-inquiry-cases",
      "sourceTableId": "table-inquiry-cases",
      "sourceColumnId": "col-inquiry-cases-id",
      "targetTableId": "table-case-activities",
      "targetColumnId": "col-case-activities-inquiry-case-id",
      "type": "one-to-many"
    },
    {
      "id": "rel-trial-applications-trial-events",
      "sourceTableId": "table-trial-events",
      "sourceColumnId": "col-trial-events-id",
      "targetTableId": "table-trial-applications",
      "targetColumnId": "col-trial-applications-trial-event-id",
      "type": "one-to-many"
    },
    {
      "id": "rel-trial-applications-lead-contacts",
      "sourceTableId": "table-lead-contacts",
      "sourceColumnId": "col-lead-contacts-id",
      "targetTableId": "table-trial-applications",
      "targetColumnId": "col-trial-applications-lead-contact-id",
      "type": "one-to-many"
    },
    {
      "id": "rel-trial-attendances-trial-applications",
      "sourceTableId": "table-trial-applications",
      "sourceColumnId": "col-trial-applications-id",
      "targetTableId": "table-trial-attendances",
      "targetColumnId": "col-trial-attendances-trial-application-id",
      "type": "one-to-many"
    },
    {
      "id": "rel-lead-conversions-lead-contacts",
      "sourceTableId": "table-lead-contacts",
      "sourceColumnId": "col-lead-contacts-id",
      "targetTableId": "table-lead-conversions",
      "targetColumnId": "col-lead-conversions-lead-contact-id",
      "type": "one-to-many"
    },
    {
      "id": "rel-lead-conversions-inquiry-cases",
      "sourceTableId": "table-inquiry-cases",
      "sourceColumnId": "col-inquiry-cases-id",
      "targetTableId": "table-lead-conversions",
      "targetColumnId": "col-lead-conversions-source-case-id",
      "type": "one-to-many"
    }
  ],
  "memos": [
    {
      "id": "memo-overview",
      "text": "# 問い合わせ・体験管理\n\n設計方針:\n- リード（見込み）を世帯/会員と切り離して保持\n- 問い合わせと体験を案件として統合的に扱い、対応履歴を時系列で追跡\n- 入会後は families/guardians/students/course_contracts へ接続",
      "position": { "x": 0, "y": -200 },
      "width": 500,
      "height": 150,
      "createdAt": "2026-01-09T00:00:00.000Z",
      "updatedAt": "2026-01-09T00:00:00.000Z"
    }
  ]
}
